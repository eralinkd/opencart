{{ header }}

<div class="container wide hero">
	<div class="content">
		<img class="image" src="{{ server }}image/home/banner.png" alt="Hero">
		<div class="decor"></div>
		<h1 class="text-white">Drone parts built for any load</h1>
		{# <a href="{{ catalog_link }}" class="hero-cta" data-oc-router="link">
			<ui-button>
				<img slot="icon" style="display: block; width: 100%; height: 100%; object-fit: contain;"
					src="{{ server }}image/icons/arrow-top-right.svg" alt="Arrow Right">
				<span slot="text">See catalog
				</span>
			</ui-button>
		</a> #}
	</div>
</div>

<div class="container products" id="batteries">
	<h3 class="products-title">Batteries</h3>
	<div class="swiper products-swiper">
		<div class="swiper-wrapper">
			{% if battery_products %}
			{% for product in battery_products %}
			<div class="swiper-slide">
				<div class="product-card" data-product-url="{{ product.url_raw }}">
					<div class="wishlist-icon"><img src="{{ server }}image/icons/heart-yellow.svg" alt="add to wishlist"></div>
					<div class="product-image">
						<img src="{{ product.image }}" alt="{{ product.name }}">
					</div>
					<div class="product-info">
						<p class="availability text-16">{{ product.availability }}</p>
						<h4 class="product-title">{{ product.name }}</h4>
					</div>
					<p class="text-16">Model: {{ product.model }}</p>
					<p class="product-price text-32">${{ product.price_formatted }}</p>
					<ui-button-secondary class="product-button">
						<span slot="text">View product</span>
					</ui-button-secondary>
				</div>
			</div>
			{% endfor %}
			{% else %}
			<div class="swiper-slide">
				<div class="product-card">
					<div class="product-info">
						<p class="text-20">Battery catalog is being prepared. Stay tuned!</p>
					</div>
				</div>
			</div>
			{% endif %}
		</div>
		<div class="swiper-pagination"></div>
	</div>
</div>

<div class="container wide why-us">
	<h2>Why SkyFix?</h2>
	<div class="grid">
		<div class="item">
			<div class="icon"><img src="{{ server }}image/home/whyus/icon1.svg" alt="Icon"></div>
			<p class="text-20">Our team of enthusiasts will help you choose the right part
			</p>
		</div>
		<div class="item">
			<div class="icon"><img src="{{ server }}image/home/whyus/icon2.svg" alt="Icon"></div>
			<p class="text-20">Verified batteries and controllers for stable flight
			</p>
		</div>
		<div class="item">
			<div class="icon"><img src="{{ server }}image/home/whyus/icon3.svg" alt="Icon"></div>
			<p class="text-20">Fast shipping and money-back guarantee
			</p>
		</div>
	</div>
</div>

<div class="container products" id="controllers">
	<h3 class="products-title">Controllers</h3>
	<div class="swiper products-swiper">
		<div class="swiper-wrapper">
			{% if controller_products %}
			{% for product in controller_products %}
			<div class="swiper-slide">
				<div class="product-card" data-product-url="{{ product.url_raw }}">
					<div class="wishlist-icon"><img src="{{ server }}image/icons/heart-yellow.svg" alt="add to wishlist"></div>
					<div class="product-image">
						<img src="{{ product.image }}" alt="{{ product.name }}">
					</div>
					<div class="product-info">
						<p class="availability text-16">{{ product.availability }}</p>
						<h4 class="product-title">{{ product.name }}</h4>
					</div>
					<p class="text-16">Model: {{ product.model }}</p>
					<p class="product-price text-32">${{ product.price_formatted }}</p>
					<ui-button-secondary class="product-button">
						<span slot="text">View product</span>
					</ui-button-secondary>
				</div>
			</div>
			{% endfor %}
			{% else %}
			<div class="swiper-slide">
				<div class="product-card">
					<div class="product-info">
						<p class="text-20">Battery catalog is being prepared. Stay tuned!</p>
					</div>
				</div>
			</div>
			{% endif %}
		</div>
		<div class="swiper-pagination"></div>
	</div>
</div>

<div class="container wide reliability-drones">
	<img class="image" src="{{ server }}image/home/reabilitydrones.png" alt="bg">
	<div class="text">
		<div class="empty"></div>
		<div class="block">
			<p class="text-40">Reliability for Your Drones</p>
			<p class="text-24">We provide proven solutions for heavy-duty use. Our team of enthusiasts tests every component
				to ensure your drone always performs reliably.</p>
			{# <ui-button is-white>
				<img slot="icon" style="display: block; width: 100%; height: 100%; object-fit: contain; filter: invert(1);"
					src="{{ server }}image/icons/arrow-top-right.svg" alt="Arrow Right">
				<span slot="text">See catalog
				</span>
			</ui-button> #}
		</div>
	</div>
</div>

<script>
	function initProductsSwiper() {
		if (typeof Swiper === 'undefined') {
			setTimeout(initProductsSwiper, 100);
			return;
		}

		new Swiper('.products-swiper', {
			slidesPerView: 3.5,
			spaceBetween: 24,
			loop: false,
			pagination: {
				el: '.swiper-pagination',
				clickable: true,
				renderBullet: function (index, className) {
					return '<span class="' + className + '"></span>';
				},
			},
			breakpoints: {
				320: {
					slidesPerView: 1.2,
					spaceBetween: 16,
				},
				768: {
					slidesPerView: 2.5,
					spaceBetween: 20,
				},
				1024: {
					slidesPerView: 3.2,
					spaceBetween: 24,
				},
			},
		});
	}

	function initWishlistIcons() {
		const wishlistIcons = document.querySelectorAll('.products .wishlist-icon');

		wishlistIcons.forEach((icon) => {
			icon.addEventListener('click', (event) => {
				event.preventDefault();
				event.stopPropagation();

				const heart = icon.querySelector('img');
				if (heart) {
					heart.classList.toggle('active');
				}

				icon.classList.toggle('is-active');
			});
		});
	}

	function initHomePage() {
		initProductsSwiper();
		initWishlistIcons();
	}

	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', initHomePage);
	} else {
		initHomePage();
	}

	document.addEventListener('click', function (event) {
		const card = event.target.closest('.product-card[data-product-url]');
		if (card) {
			window.location.href = card.getAttribute('data-product-url');
		}
	});
</script>

{{ footer }}